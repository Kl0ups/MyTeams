  on:
    push:
      branches:
        - main
        - develop
        - issue-*
        - hotfix-*
    pull_request:
      branches:
        - main
        - develop
        - issue-*
        - hotfix-*
  jobs:
    coding-style-checker:
      name: Check EPITECH Coding Style
      runs-on: ubuntu-latest
      steps:
        - name: Checkout the repository
          uses: actions/checkout@v2
        - name: List all files in GITHUB_WORKSPACE
          run: ls -la ${GITHUB_WORKSPACE}
        - name: Execute the CS script
          run: bash ${GITHUB_WORKSPACE}/scripts/coding-style.sh.sh . .
        - name: Check the script ouput (coding-style-reports.log)
          run: |
            if [ -s ${GITHUB_WORKSPACE}/coding-style-reports.log ]; then
              cat ${GITHUB_WORKSPACE}/coding-style-reports.log
              exit 1
            fi